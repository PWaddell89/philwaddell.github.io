<html>
  <head>
    <script src="https://cdn.tryretool.com/embed.js">
     
        function syntaxHighlight(json) {
    if (typeof json != 'string') {
      json = JSON.stringify(json, undefined, 2);
    }
    json = json.replace(/&/g, '&').replace(/</g, '<').replace(/>/g, '>');
    return json.replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g, function (match) {
      var cls = 'number';
      if (/^"/.test(match)) {
        if (/:$/.test(match)) {
          cls = 'key';
        } else {
          cls = 'string';
        }
      } else if (/true|false/.test(match)) {
        cls = 'boolean';
      } else if (/null/.test(match)) {
        cls = 'null';
      }
      return '<span class="' + cls + '">' + match + '</span>';
    });
  }

  //POS NATIVE FUNCTIONS
  //PRINT POS CONTEXT
    function printContext() {
    document.getElementById("dataDiv").innerHTML = "<pre class='text-white'>"+JSON.stringify(posContext, undefined, 2)+"</pre>"
    }
    
     //GET CURRENT ACCOUNT DETAILS
      function getCurrentAccount() {
        const printResult = function (response) {
          document.getElementById("dataDivCurrentAccount").innerHTML = "<pre class='text-white'>"+JSON.stringify(response.data, undefined, 2)+"</pre>"
        };
        pos_getCurrentAccount(printResult)
      }
      
      var rt =window.retool.RetoolDashboard(document.getElementById('container'),
      'https://lsapacproserv.retool.com/embedded/public/f095bb33-7a9e-4fba-a294-c566cfc150a4')
      
    window.addEventListener('load', printContext);
    window.addEventListener('load', getCurrentAccount);
  </script>
  </head>
  <body>
    <div style="height: 800px; width: 100%;" id="container"></div>
    <div id="dataDiv" style ="display:none;"></div>
    <div id="dataDivCurrentAccount"style ="display:none;"></div>
<div class="card bg-dark mb-3">
                <div class="card-header text-white">Code Example</div>
                <div class="card-body">
                  <p class="card-text">
                    <pre class="fs-6">
                      <code class="language-javascript text-white">
                        function pos_payAccount(paymentMethodCode, callback) {
                          const callbackId = pos_generateCallbackId()
                          callbacks[callbackId] = callback
                      
                          const data = {
                              name : 'payAccount',
                              args : { paymentMethodCode, callbackId }
                          }
                      
                          pos_postMessage(data)
                      }
                      Pays for the current account.
                      
                      @param {string} paymentMethodCode
                      Reference code used to identify the payment method to use when paying for the current account.
                      
                      @param {posCallback} callback
                      The callback that will be invoked when the native function is done executing.  
                      </code>
                    </pre>
                  </p>
                </div>
              </div>
            </div>
</html>

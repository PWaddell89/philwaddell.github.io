<!DOCTYPE html>
<html>
  <head>
    <title>Mt Buller Snow Dough App - MVP</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
    <style>
      body {
        padding: 50px;
      }
      .form-group {
        margin-bottom: 20px;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>Mt Buller Snow Dough App - MVP</h1>
      <hr>
      <div class="row">
        <div class="col-md-8">
          <div class="form-group">
            <label for="searchInput">Search Customers:</label>
            <input type="text" class="form-control" id="searchInput" placeholder="Enter search text">
          </div>
          <button type="button" class="btn btn-primary" id="searchBtn">Search</button>
        </div>
      </div>
      <div class="row">
        <div class="col-md-8">
          <div class="form-group">
            <label for="output">Output:</label>
            <textarea class="form-control" id="output" rows="5" readonly></textarea>
          </div>
        </div>
      </div>
    </div>
    <script>
      $(document).ready(function() {
        $('#searchBtn').click(function() {
          var query = $('#searchInput').val();
          if (query.trim() === '') {
            $('#output').val('Please enter a search query.');
            return;
          }
          var url = 'https://bull-ause-shared-apim.azure-api.net/unitytest/api/customers/search?Query=' + encodeURIComponent(query) + '&EmbedEntitlements=true';
          $.ajax({
            url: url,
            headers: {
              'Ocp-Apim-Subscription-Key': 'd2691b94878b4335a755f8e3cf090348',
              'unity-api-version': '3.0'
            }
          })
          .done(function(response) {
            $('#output').val(JSON.stringify(response, null, 2));
          })
          .fail(function(jqXHR, textStatus, errorThrown) {
            if (jqXHR.status === 404) {
              $('#output').val('Error: ' + jqXHR.statusText);
            } else {
              $('#output').val('Error: ' + textStatus + ', ' + errorThrown);
            }
          });
        });
      });
    </script>
  </body>
</html>
